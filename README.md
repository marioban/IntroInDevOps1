# IntroInDevOpsLabs


| **Lab 02 – Container Management**                                                                                                                                       | **Commands**                                                                                                                                               | **Explanation**                                                                                                                                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1. Connect to the workstation VM inside RH Academy lab environment.                                                                                                     | N/A                                                                                                                                                         | You need to access your VM using the credentials provided in your RH Academy lab environment.                                                                                           |
| 2. Find the latest nginx container image from Docker Hub using podman search.                                                                                           | `podman search nginx`                                                                                                                                       | This command searches for the `nginx` image on Docker Hub.                                                                                                                              |
| 3. Find the documentation explaining the use of that image.                                                                                                             | Visit the [nginx Docker Hub page](https://hub.docker.com/_/nginx)                                                                                            | The documentation provides details on how to use the nginx image.                                                                                                                       |
| 4. List running containers using podman ps.                                                                                                                             | `podman ps`                                                                                                                                                 | This command lists all running containers.                                                                                                                                              |
| 5. Pull the nginx image using podman pull.                                                                                                                              | `podman pull nginx`                                                                                                                                         | This command downloads the latest nginx image.                                                                                                                                          |
| 6. Find more information about the container image using podman image inspect.                                                                                          | `podman image inspect nginx`                                                                                                                                | This command provides detailed information about the nginx image.                                                                                                                       |
| 7. Create a container instance from that image in the background and map it to a host port 80 using podman run.                                                         | `podman run -d -p 80:80 nginx`                                                                                                                               | This runs an nginx container in the background, mapping host port 80 to container port 80.                                                                                              |
| 8. Create another instance of that container in the background and map it to host port 8080, naming it web8080.                                                         | `podman run -d -p 8080:80 --name web8080 nginx`                                                                                                              | This runs another nginx container in the background, mapping host port 8080 to container port 80 and names it web8080.                                                                  |
| 9. List running containers.                                                                                                                                             | `podman ps`                                                                                                                                                 | This lists all running containers.                                                                                                                                                      |
| 10. Stop the first container using podman stop.                                                                                                                         | `podman stop <container_id>`                                                                                                                                | Replace `<container_id>` with the ID of the first container to stop it.                                                                                                                 |
| 11. Try creating another container instance named web8080 and resolve any issues.                                                                                       | `podman run -d -p 8080:80 --name web8080 nginx`                                                                                                              | If the name is already in use, you might need to remove or rename the existing container.                                                                                               |
| 12. Inspect the details of web8080 container using podman inspect.                                                                                                      | `podman inspect web8080`                                                                                                                                    | This provides detailed information about the web8080 container.                                                                                                                         |
| 13. List all downloaded images using podman images.                                                                                                                     | `podman images`                                                                                                                                             | This lists all container images available locally.                                                                                                                                      |
| 14. Export the nginx image using podman image save or podman export.                                                                                                    | `podman image save nginx -o nginx.tar`<br>`podman export <container_id> -o nginx_container.tar`                                                              | The first command saves the image as a tarball, the second exports the container's filesystem as a tarball.                                                                             |
| 15. Find the command to create a container image, modify it, and save it as a new image.                                                                                | `podman commit <container_id> new_image_name`                                                                                                               | This command creates a new image from a modified container.                                                                                                                              |
| 16. Change the contents of the default web page of web8080 container without terminating it.                                                                            | `podman exec -it web8080 /bin/bash`                                                                                                                         | This allows you to access the container’s shell to modify the web page.                                                                                                                  |
| 17a. Do containers lose their state when they are terminated and are container tools changing that behavior?                                                            | N/A                                                                                                                                                         | Yes, by default containers lose their state upon termination. Container tools like Podman and Docker offer features like volumes and persistent storage to maintain state.               |
| 17b. Do you need to pull the container image before creating a container?                                                                                               | N/A                                                                                                                                                         | Yes, the image needs to be available locally, either by pulling or building it.                                                                                                         |
| 17c. Which command can you use to import a podman image?                                                                                                                | `podman image import <file> [name[:tag]]`                                                                                                                   | This command imports a container image from a file.                                                                                                                                     |
| 17d. Does podman support restart of container images?                                                                                                                   | N/A                                                                                                                                                         | Yes, Podman supports restarting containers using systemd services or quadlets.                                                                                                          |


| **Lab 03 – Building Container Images**                                                                                              | **Commands**                                                                                                          | **Explanation**                                                                                                                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1. Containerize the application from the provided source code using podman.                                                         | `git clone https://github.com/docker/getting-started-app`<br>`cd getting-started-app`<br>`podman build -t getting-started .` | Clones the source code, navigates to its directory, and builds the container image using Podman.                                                                |
| 2. Build the image again, but tag it with 0.0.1.                                                                                    | `podman build -t getting-started:0.0.1 .`                                                                             | This builds the image and tags it with version 0.0.1.                                                                                                            |
| 3. Inspect the image contents using podman image inspect.                                                                           | `podman image inspect getting-started:0.0.1`                                                                          | This command provides detailed information about the image.                                                                                                      |
| 4. Review all available Dockerfile instructions.                                                                                    | Visit the [Dockerfile reference](https://docs.docker.com/reference/dockerfile/)                                        | The documentation provides details on all Dockerfile instructions.                                                                                               |
| 5. Change the application to display a different message when there are no to-do items.                                             | Edit the source code following the guide: [Updating App](https://docs.docker.com/get-started/03_updating_app/)<br>Rebuild the image: `podman build -t getting-started:0.0.2 .` | Update the application code and build a new image with the changes.                                                                                              |
| 6. Build the image again, but tag it with 0.0.2.                                                                                    | `podman build -t getting-started:0.0.2 .`                                                                             | This builds the updated image and tags it with version 0.0.2.                                                                                                     |
| 7. See the difference between these two images using podman diff.                                                                   | `podman diff getting-started:0.0.1 getting-started:0.0.2`                                                             | This shows the differences between the two image versions.                                                                                                        |
| 8. Create another repository on Docker Hub and push the images there.                                                               | `podman login docker.io`<br>`podman push getting-started:0.0.1`<br>`podman push getting-started:0.0.2`                | These commands log in to Docker Hub and push the images to the repository.                                                                                        |
| 9. Create a Containerfile using ubi8 image, update packages, install httpd, and configure it to start with the container.           | **Containerfile:**<br>`FROM ubi8`<br>`RUN yum update -y && yum install -y httpd`<br>`CMD ["httpd", "-D", "FOREGROUND"]`<br>**Build the image:**<br>`podman build -t myweb:0.0.1 -f Containerfile` | This builds a new image with httpd installed and configured to run when the container starts.                                                                     |
| 10. Create a quadlet file to configure the system to start the container with the system.                                           | Follow the [Red Hat guide](https://www.redhat.com/sysadmin/quadlet-podman)                                             | Create a systemd service file to manage the container’s startup.                                                                                                  |
| 11. Clone a Git repository and build container images using Dockerfile1 and Dockerfile2, and check their sizes.                    | `git clone https://github.com/jstanesic/example-go-app`<br>`cd example-go-app`<br>`podman build -t example:Dockerfile1 -f Dockerfile1`<br>`podman build -t example:Dockerfile2 -f Dockerfile2`<br>`podman images` | These commands build container images using two different Dockerfiles and compare their sizes to understand the benefits of multi-stage builds. |


Here are the tasks and corresponding commands for Labs 04, 05, and 06 formatted into tables:

### Lab 04 – Advanced Container Concepts

| **Task**                                                                                                                                                              | **Commands**                                                                                                                                                                        | **Explanation**                                                                                                                                                                           |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1. Log in into workstation VM in RH academy.                                                                                                                           | N/A                                                                                                                                                                                  | You need to access your VM using the credentials provided in your RH Academy lab environment.                                                                                              |
| 2. List all podman networks using podman network command. It should only show default network called podman with the bridge driver.                                    | `podman network ls`                                                                                                                                                                  | This command lists all Podman networks.                                                                                                                                                    |
| 3. Inspect the network configuration of the default podman network. What is the value of dns_enabled setting?                                                         | `podman network inspect podman`                                                                                                                                                      | This command provides details about the podman network, including the dns_enabled setting.                                                                                                 |
| 4. Create a custom network with DNS enabled named labnet.                                                                                                             | `podman network create --dns-enabled labnet`                                                                                                                                          | This command creates a new network named labnet with DNS enabled.                                                                                                                          |
| 5. Create a MySQL database container with specified configurations connected to labnet network.                                                                       | `podman run -d --name mysql --network labnet -e MYSQL_ROOT_PASSWORD=random -e MYSQL_DATABASE=wordpress -e MYSQL_USER=student -e MYSQL_PASSWORD=DB15secure! mysql`                      | This runs a MySQL container with the specified environment variables and connects it to the labnet network.                                                                                |
| 6. Create a WordPress container with specified configurations connected to labnet network and publishing port 80 to host port 8080.                                   | `podman run -d --name wordpress --network labnet -p 8080:80 -e WORDPRESS_DB_HOST=mysql -e WORDPRESS_DB_USER=student -e WORDPRESS_DB_PASSWORD=DB15secure! -e WORDPRESS_DB_NAME=wordpress wordpress` | This runs a WordPress container with the specified environment variables, connects it to the labnet network, and maps port 80 on the container to port 8080 on the host.                   |
| 7. Would previous steps work if using the default network?                                                                                                            | N/A                                                                                                                                                                                  | No, because the default network might not have DNS enabled or the containers may not be able to resolve each other's names correctly.                                                      |
| 8. Create a default web page in the WordPress application.                                                                                                            | Access WordPress via `http://<host-ip>:8080` and configure the site through the web interface.                                                                                        | This step involves manually setting up the WordPress site via the web interface.                                                                                                           |
| 9. Use bind mounts to persist MySQL data, delete old MySQL container, and create a new one with bind mounts.                                                          | `podman run -d --name mysql --network labnet -v /home/student/mysql:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=random -e MYSQL_DATABASE=wordpress -e MYSQL_USER=student -e MYSQL_PASSWORD=DB15secure! mysql`  | This command runs a MySQL container with a bind mount to persist data.                                                                                                                     |
| 10. Recreate MySQL container using volumes instead of bind mounts.                                                                                                    | `podman volume create mysql_data`<br>`podman run -d --name mysql --network labnet -v mysql_data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=random -e MYSQL_DATABASE=wordpress -e MYSQL_USER=student -e MYSQL_PASSWORD=DB15secure! mysql` | This command creates a volume and runs a MySQL container using the volume for data persistence.                                                                                            |
| 11. Install podman-compose package.                                                                                                                                   | `sudo dnf install podman-compose`                                                                                                                                                     | This installs the podman-compose package.                                                                                                                                                  |
| 12. Review samples of compose files from provided links.                                                                                                              | Visit provided [Podman Compose examples](https://github.com/containers/podman-compose/tree/main/examples) and [Docker Awesome Compose](https://github.com/docker/awesome-compose).   | This step involves reviewing sample compose files for reference.                                                                                                                           |
| 13. Create a compose file to deploy WordPress and MySQL.                                                                                                              | **Compose file example:**<br>`version: '3'`<br>`services:`<br>`  db:`<br>`    image: mysql`<br>`    environment:`<br>`      MYSQL_ROOT_PASSWORD: random`<br>`      MYSQL_DATABASE: wordpress`<br>`      MYSQL_USER: student`<br>`      MYSQL_PASSWORD: DB15secure!`<br>`  wordpress:`<br>`    image: wordpress`<br>`    ports:`<br>`      - "8080:80"`<br>`    environment:`<br>`      WORDPRESS_DB_HOST: db`<br>`      WORDPRESS_DB_USER: student`<br>`      WORDPRESS_DB_PASSWORD: DB15secure!`<br>`      WORDPRESS_DB_NAME: wordpress` | This is an example compose file to deploy WordPress and MySQL containers.                                                                                                                    |
| 14. Deploy the containers using the created compose file.                                                                                                             | `podman-compose up -d`                                                                                                                                                                | This command deploys the containers defined in the compose file.                                                                                                                            |

